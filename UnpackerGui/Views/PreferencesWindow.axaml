<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:UnpackerGui.ViewModels"
        xmlns:conv="clr-namespace:UnpackerGui.Converters"
        xmlns:dm="clr-namespace:UnpackerGui.DesignMode"
        xmlns:ic="using:FluentIcons.Avalonia"
        xmlns:views="clr-namespace:UnpackerGui.Views"
        x:Class="UnpackerGui.Views.PreferencesWindow"
        mc:Ignorable="d"
        Icon="avares://UnpackerGui/Assets/info.ico"
        Title="Preferences"
        Width="520"
        Height="280"
        x:DataType="vm:PreferencesViewModel"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Loaded="Window_Loaded"
        Unloaded="Window_Unloaded">
    <Window.Resources>
        <conv:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
        <conv:ExpressionConverter x:Key="ExpressionConverter"/>
        <conv:ControlStringConverter x:Key="ControlStringConverter"/>
    </Window.Resources>
    <!--Base Panel-->
    <DockPanel Margin="10">
        <!--Preferences List-->
        <ListBox ItemsSource="{Binding Preferences, FallbackValue={x:Static dm:Variables.Preferences}}"
                 SelectedItem="{Binding SelectedPreference}"
                 SelectedIndex="{Binding SelectedIndex}"
                 Margin="0,0,15,0"
                 SelectionMode="AlwaysSelected">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="vm:PreferenceViewModel">
                    <TextBlock Text="{Binding Name}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <!--Visible Option-->
        <StackPanel>
            <!--Option Name-->
            <TextBlock Text="{Binding SelectedPreference.Name, FallbackValue={x:Static dm:Variables.PreferenceName}}"
                       FontSize="20"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"/>
            <!--Option Description-->
            <TextBlock Text="{Binding SelectedPreference.Description, FallbackValue={x:Static dm:Variables.PreferenceDescription}}"
                       Opacity="100"
                       TextWrapping="Wrap"
                       Margin="0,0,0,10"/>
            <!--Option Views-->
            <views:FileConflictOptions IsVisible="{Binding SelectedIndex, Converter={StaticResource ExpressionConverter} ConverterParameter=\=0, FallbackValue={x:Static dm:Variables.True}}"/>
            <views:FolderOptions IsVisible="{Binding SelectedIndex, Converter={StaticResource ExpressionConverter}, ConverterParameter=\=1, FallbackValue={x:Static dm:Variables.False}}"/>
            <views:MiscOptions IsVisible="{Binding SelectedIndex, Converter={StaticResource ExpressionConverter}, ConverterParameter=\=2, FallbackValue={x:Static dm:Variables.False}}"/>
        </StackPanel>
    </DockPanel>
</Window>
